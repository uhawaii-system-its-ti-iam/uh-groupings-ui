<th:block th:fragment="preferences">

    <h2 class="font-weight-bold text-dark pt-4">Options and Synchronization Destinations</h2>
    <div th:text="#{screen.message.common.preferences.info}"></div>
    <div id="preferences-display" class="tab-pane fade show active">
        <div class="row pt-4 pb-5">
            <div class="col-md-6 col-12">
                <h3>User Options</h3>
                <div>
                    <div class="form-check">
                        <input type="checkbox" class="position-relative ml-0" ng-model="allowOptIn" id="allowOptIn"
                               ng-change="updateAllowOptIn()"/>
                        <label class="form-check-label" for="allowOptIn">
                            Allow people to add themselves to this group
                        </label>
                        <span class="fa fa-question-circle" role="button"
                              tooltip data-placement="right"
                              tabindex="0"
                              th:title="#{screen.message.common.tooltip.preference.allowOptIn}"
                              th:attr="ng-click='displayPreferenceInfoModal(\'' + #{screen.message.common.tooltip.preference.allowOptIn} + '\')',
                              ng-keypress='$event.keyCode === 13 ? displayPreferenceInfoModal(\'' + #{screen.message.common.tooltip.preference.allowOptIn} + '\') : null'"></span>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" class="position-relative ml-0" id="allowOptOut" ng-model="allowOptOut"
                               ng-change="updateAllowOptOut()"/>
                        <label class="form-check-label" for="allowOptOut">
                            Allow people to remove themselves from this group
                        </label>
                        <span class="fa fa-question-circle" role="button"
                              tooltip data-placement="right"
                              tabindex="0"
                              th:title="#{screen.message.common.tooltip.preference.allowOptOut}"
                              th:attr="ng-click='displayPreferenceInfoModal(\'' + #{screen.message.common.tooltip.preference.allowOptOut} + '\')',
                              ng-keypress='$event.keyCode === 13 ? displayPreferenceInfoModal(\'' + #{screen.message.common.tooltip.preference.allowOptOut} + '\') : null'"></span>
                    </div>
                </div>
                <h3 class="mt-3">Reset Grouping</h3>
                <div>
                    <form ng-submit="resetGroup()">
                        <div class="form-check">
                            <input type="checkbox" class="position-relative ml-0" id="resetIncludeCheck"
                                   ng-click="updateIncludeCheck()"
                                   ng-model="includeCheck" ng-disabled="includeDisable">
                            <label class="form-check-label" for="resetIncludeCheck">Reset Include</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" class="position-relative ml-0" id="resetExcludeCheck"
                                   ng-click="updateExcludeCheck()"
                                   ng-model="excludeCheck" ng-disabled="excludeDisable">
                            <label class="form-check-label" for="resetExcludeCheck">Reset Exclude</label>
                        </div>
                        <div>
                            <button class="btn btn-primary btn-sm" type="submit"
                                    ng-disabled="excludeCheck == false && includeCheck == false">Reset Selected
                            </button>
                            <span class="fa fa-question-circle" role="button"
                                  tooltip data-placement="right"
                                  tabindex="0"
                                  th:title="#{screen.message.common.tooltip.preference.resetGroup}"
                                  th:attr="ng-click='displayPreferenceInfoModal(\'' + #{screen.message.common.tooltip.preference.resetGroup} + '\')',
                              ng-keypress='$event.keyCode === 13 ? displayPreferenceInfoModal(\'' + #{screen.message.common.tooltip.preference.resetGroup} + '\') : null'"></span>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-md-6 col-12">
                <h3>Sync Destinations</h3>
                <div>
                    <div>
                        <div class="form-check" ng-repeat="syncDest in syncDestArray">
                            <div ng-if="!syncDest.hidden">
                                <input class="form-check-input" type="checkbox" id="syncDest.isSynced-{{syncDest.name}}"
                                       ng-model="syncDest.synced"
                                       ng-change="displaySyncDestModal(syncDest.name)"/>
                                <label class="form-check-label" for="syncDest.isSynced-{{syncDest.name}}">
                                    {{ syncDest.description }}
                                </label>
                                <span class="fa fa-question-circle" role="button"
                                      tooltip="{{syncDest.tooltip}}" data-placement="right"
                                      tabindex="0"
                                      th:attr="ng-click='displayPreferenceInfoModal(syncDest.tooltip)',
                              ng-keypress='$event.keyCode === 13 ? displayPreferenceInfoModal(syncDest.tooltip) : null'"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</th:block>
